---
- name: Install rofi on Linux
  ansible.builtin.apt:
    name: rofi
    state: present
    update_cache: true
  become: true
  when: ansible_os_family == 'Linux'

- name: Ensure config directory exists on Windows
  ansible.windows.win_file:
    path: "{{ ansible_user_dir }}/.local/rofi/themes"
    state: directory
  when: ansible_os_family == 'Linux'

- name: Copy theme
  ansible.builtin.copy:
    src: catpuccin-mocha.rasi
    dest: "{{ ansible_user_dir }}/.local/rofi/themes/catpuccin-mocha.rasi"
    mode: preserve
  when: ansible_os_family == 'Linux'

- name: Ensure config directory exists on Windows
  ansible.windows.win_file:
    path: "{{ ansible_user_dir }}/.config/rofi"
    state: directory
  when: ansible_os_family == 'Linux'

- name: Copy config
  ansible.builtin.copy:
    src: config.rasi
    dest: "{{ ansible_user_dir }}/.config/rofi/config.rasi"
    mode: preserve
  when: ansible_os_family == 'Linux'
